<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Lotto ì¶”ì²œë²ˆí˜¸ ì¶”ì¶œê¸°</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 10px; }
    h1 { color: #2c3e50; font-size: 1.4em; margin-bottom: 5px; }
    p { font-size: 0.95em; margin-bottom: 15px; }
    h3 { margin-bottom: 8px; font-size: 1.1em; }

    button { 
      width: 100%; 
      padding: 14px; 
      font-size: 1em; 
      margin-top: 15px; 
      background: #3498db; 
      color: white; 
      border: none; 
      border-radius: 6px;
    }

    .section { margin-bottom: 20px; }
    .result { margin-top: 15px; padding: 12px; border: 1px solid #ccc; border-radius: 6px; }
    .set { margin: 6px 0; }
    .dup { color: #d35400; font-weight: bold; margin-top: 8px; }

    /* ëª¨ë°”ì¼ ê¸°ë³¸: ì„¸ë¡œ ì •ë ¬ */
    .grid { 
      display: flex; 
      flex-direction: column; 
      gap: 12px; 
    }
    .grid label { font-size: 1em; }
    .grid select { padding: 6px; font-size: 0.95em; }

    /* ë°ìŠ¤í¬í†± í™”ë©´ì—ì„œëŠ” ê°€ë¡œ ì •ë ¬ */
    @media (min-width: 700px) {
      .grid { 
        display: grid; 
        grid-template-columns: 180px 150px; 
        gap: 12px; 
        align-items: center; 
      }
    }
  </style>
</head>
<body>
  <h1>ğŸ“Š Lotto ì¶”ì²œë²ˆí˜¸ ì¶”ì¶œê¸°</h1>
  <p>ì›í•˜ëŠ” í†µê³„ë¶„ì„ ë°˜ì˜ ê¸°ê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</p>

  <!-- ê¸°ê°„ ì„ íƒ -->
  <div class="section">
    <h3>ê¸°ê°„ ì„ íƒ & í™€ì§ë¹„ìœ¨</h3>
    <div class="grid">
      <label><input type="checkbox" id="period1y"> ìµœê·¼1ë…„</label>
      <select id="ratio1y">
        <option value="2:4">2:4</option>
        <option value="3:3">3:3</option>
        <option value="4:2">4:2</option>
      </select>

      <label><input type="checkbox" id="period3y"> ìµœê·¼3ë…„</label>
      <select id="ratio3y">
        <option value="2:4">2:4</option>
        <option value="3:3">3:3</option>
        <option value="4:2">4:2</option>
      </select>

      <label><input type="checkbox" id="period5y"> ìµœê·¼5ë…„</label>
      <select id="ratio5y">
        <option value="2:4">2:4</option>
        <option value="3:3">3:3</option>
        <option value="4:2">4:2</option>
      </select>

      <label><input type="checkbox" id="period10y"> ìµœê·¼10ë…„</label>
      <select id="ratio10y">
        <option value="2:4">2:4</option>
        <option value="3:3">3:3</option>
        <option value="4:2">4:2</option>
      </select>

      <label><input type="checkbox" id="periodAll"> ì „ì²´ê¸°ê°„</label>
      <select id="ratioAll">
        <option value="2:4">2:4</option>
        <option value="3:3">3:3</option>
        <option value="4:2">4:2</option>
      </select>
    </div>
  </div>

  <!-- ë²„íŠ¼ -->
  <button onclick="generateNumbers()">ì¶”ì²œë²ˆí˜¸ ì¶”ì¶œí•˜ê¸°</button>

  <!-- ê²°ê³¼ -->
  <div id="results"></div>

<script>
function generateNumbers() {
  const resultsDiv = document.getElementById("results");
  resultsDiv.innerHTML = "";

  const conditions = {
    "period1y": [
      {min:129, max:139}, {min:128, max:140}, {min:126, max:143}, {min:123, max:146}, {exact:134}
    ],
    "period3y": [
      {min:134, max:140}, {min:134, max:141}, {min:132, max:142}, {min:130, max:144}, {exact:137}
    ],
    "period5y": [
      {min:136, max:140}, {min:135, max:140}, {min:134, max:142}, {min:132, max:143}, {exact:138}
    ],
    "period10y": [
      {min:137, max:140}, {min:136, max:141}, {min:135, max:141}, {min:134, max:142}, {exact:139}
    ],
    "periodAll": [
      {min:137, max:139}, {min:137, max:140}, {min:136, max:140}, {min:135, max:141}, {exact:138}
    ]
  };

  const labels = ["CI 70%", "CI 80%", "CI 95%", "CI 99%", "Mean"];
  const periodNames = {
    "period1y": "ìµœê·¼1ë…„",
    "period3y": "ìµœê·¼3ë…„",
    "period5y": "ìµœê·¼5ë…„",
    "period10y": "ìµœê·¼10ë…„",
    "periodAll": "ì „ì²´ê¸°ê°„"
  };

  for (const period in conditions) {
    if (document.getElementById(period).checked) {
      const ratio = document.getElementById("ratio" + period.replace("period","")).value;
      const section = document.createElement("div");
      section.className = "result";
      section.innerHTML = `<h3>${periodNames[period]}</h3>`;

      let allNums = [];

      conditions[period].forEach((cond, idx) => {
        let nums = generateSet(ratio, cond);
        allNums = allNums.concat(nums);
        section.innerHTML += `<div class="set"><b>${labels[idx]}:</b> ${nums.join(", ")}</div>`;
      });

      const freq = {};
      allNums.forEach(n => { freq[n] = (freq[n]||0)+1; });
      const dupNums = Object.entries(freq)
        .filter(([num,count]) => count >= 2)
        .sort((a,b)=>b[1]-a[1])
        .map(([num,count]) => `${num}(${count}íšŒ)`);

      if (dupNums.length > 0) {
        section.innerHTML += `<p class="dup">ì¶”ì²œë²ˆí˜¸ ë‚´ ì¤‘ë³µ ìˆ«ì: ${dupNums.join(", ")}</p>`;
      }

      resultsDiv.appendChild(section);
    }
  }
}

function generateSet(ratio, cond) {
  const [oddCount, evenCount] = ratio.split(":").map(Number);
  let set = [];

  while (true) {
    set = [];
    while (set.filter(n => n % 2 === 1).length < oddCount) {
      let num = Math.floor(Math.random() * 45) + 1;
      if (num % 2 === 1) set.push(num);
    }
    while (set.filter(n => n % 2 === 0).length < evenCount) {
      let num = Math.floor(Math.random() * 45) + 1;
      if (num % 2 === 0) set.push(num);
    }
    set = [...new Set(set)];
    while (set.length < 6) {
      let num = Math.floor(Math.random() * 45) + 1;
      set.push(num);
      set = [...new Set(set)];
    }
    set.sort((a,b)=>a-b);

    const sum = set.reduce((a,b)=>a+b,0);
    if (cond.exact !== undefined && sum === cond.exact) return set;
    if (cond.min !== undefined && sum >= cond.min && sum <= cond.max) return set;
  }
}
</script>
</body>
</html>
