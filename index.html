<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lotto ì¶”ì²œë²ˆí˜¸ ì¶”ì¶œê¸°</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 10px; }
    h1 { color: #2c3e50; font-size: 1.4em; margin-bottom: 6px; }
    p  { font-size: 0.95em; margin-bottom: 14px; }
    h3 { margin: 10px 0; font-size: 1.1em; }

    /* ë²„íŠ¼ í¬ê²Œ + ëª¨ë°”ì¼ ì¹œí™” */
    button {
      width: 100%;
      padding: 14px;
      font-size: 1.1em;
      margin-top: 12px;
      background: #3498db;
      color: #fff;
      border: none;
      border-radius: 6px;
    }

    .section { margin-bottom: 18px; }
    .result  { margin-top: 14px; padding: 12px; border: 1px solid #ccc; border-radius: 6px; }
    .set     { margin: 6px 0; }
    .dup     { color: #d35400; font-weight: bold; margin-top: 8px; }

    /* í‘œ ìŠ¤íƒ€ì¼ */
    table { width: 100%; border-collapse: collapse; }
    th, td { border: 1px solid #ccc; padding: 10px; text-align: center; }
    th { background: #f4f4f4; font-weight: 600; }

    /* ëª¨ë°”ì¼ ì²´í¬ë°•ìŠ¤ í¬ê²Œ */
    input[type="checkbox"] {
      width: 22px;
      height: 22px;
      transform: scale(1.3);
      margin-right: 8px;
      vertical-align: middle;
    }
    label  { font-size: 1.05em; }
    select { padding: 6px; font-size: 1em; }

    /* ë°ìŠ¤í¬í†±ì—ì„œ í‘œ ê°€ë…ì„± í–¥ìƒ */
    @media (min-width: 700px) {
      th, td { padding: 12px; }
    }
  </style>
</head>
<body>
  <h1>ğŸ“Š Lotto ì¶”ì²œë²ˆí˜¸ ì¶”ì¶œê¸°</h1>
  <p>ì›í•˜ëŠ” í†µê³„ë¶„ì„ ë°˜ì˜ ê¸°ê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</p>

  <!-- ê¸°ê°„ ì„ íƒ í‘œ -->
  <div class="section">
    <h3>ê¸°ê°„ ì„ íƒ & í™€ì§ë¹„ìœ¨</h3>
    <table>
      <thead>
        <tr>
          <th>ê¸°ê°„</th>
          <th>í™€ì§ë¹„ìœ¨</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><label for="period1y"><input type="checkbox" id="period1y" /> ìµœê·¼1ë…„</label></td>
          <td>
            <select id="ratio1y">
              <option value="2:4">2:4</option>
              <option value="3:3">3:3</option>
              <option value="4:2">4:2</option>
            </select>
          </td>
        </tr>
        <tr>
          <td><label for="period3y"><input type="checkbox" id="period3y" /> ìµœê·¼3ë…„</label></td>
          <td>
            <select id="ratio3y">
              <option value="2:4">2:4</option>
              <option value="3:3">3:3</option>
              <option value="4:2">4:2</option>
            </select>
          </td>
        </tr>
        <tr>
          <td><label for="period5y"><input type="checkbox" id="period5y" /> ìµœê·¼5ë…„</label></td>
          <td>
            <select id="ratio5y">
              <option value="2:4">2:4</option>
              <option value="3:3">3:3</option>
              <option value="4:2">4:2</option>
            </select>
          </td>
        </tr>
        <tr>
          <td><label for="period10y"><input type="checkbox" id="period10y" /> ìµœê·¼10ë…„</label></td>
          <td>
            <select id="ratio10y">
              <option value="2:4">2:4</option>
              <option value="3:3">3:3</option>
              <option value="4:2">4:2</option>
            </select>
          </td>
        </tr>
        <tr>
          <td><label for="periodAll"><input type="checkbox" id="periodAll" /> ì „ì²´ê¸°ê°„</label></td>
          <td>
            <select id="ratioAll">
              <option value="2:4">2:4</option>
              <option value="3:3">3:3</option>
              <option value="4:2">4:2</option>
            </select>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- ë²„íŠ¼ -->
  <button id="generateBtn">ì¶”ì²œë²ˆí˜¸ ì¶”ì¶œí•˜ê¸°</button>

  <!-- ê²°ê³¼ -->
  <div id="results"></div>

  <script>
    // ì•ˆì „í•˜ê²Œ ë²„íŠ¼ ì´ë²¤íŠ¸ ë°”ì¸ë”© (DOMContentLoaded ì´í›„ ë³´ì¥)
    document.addEventListener("DOMContentLoaded", () => {
      document.getElementById("generateBtn").addEventListener("click", generateNumbers);
    });

    // ê¸°ê°„ë³„ í•© ì¡°ê±´
    const CONDITIONS = {
      period1y: [
        { min: 129, max: 139 }, { min: 128, max: 140 }, { min: 126, max: 143 }, { min: 123, max: 146 }, { exact: 134 }
      ],
      period3y: [
        { min: 134, max: 140 }, { min: 134, max: 141 }, { min: 132, max: 142 }, { min: 130, max: 144 }, { exact: 137 }
      ],
      period5y: [
        { min: 136, max: 140 }, { min: 135, max: 140 }, { min: 134, max: 142 }, { min: 132, max: 143 }, { exact: 138 }
      ],
      period10y: [
        { min: 137, max: 140 }, { min: 136, max: 141 }, { min: 135, max: 141 }, { min: 134, max: 142 }, { exact: 139 }
      ],
      periodAll: [
        { min: 137, max: 139 }, { min: 137, max: 140 }, { min: 136, max: 140 }, { min: 135, max: 141 }, { exact: 138 }
      ]
    };

    const LABELS = ["CI 70%", "CI 80%", "CI 95%", "CI 99%", "Mean"];
    const PERIOD_NAMES = {
      period1y: "ìµœê·¼1ë…„",
      period3y: "ìµœê·¼3ë…„",
      period5y: "ìµœê·¼5ë…„",
      period10y: "ìµœê·¼10ë…„",
      periodAll: "ì „ì²´ê¸°ê°„"
    };

    function generateNumbers() {
      const resultsDiv = document.getElementById("results");
      resultsDiv.innerHTML = "";

      const selectedPeriods = Object.keys(CONDITIONS).filter(p => document.getElementById(p).checked);

      if (selectedPeriods.length === 0) {
        resultsDiv.innerHTML = "<div class='result'><b>ê¸°ê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</b></div>";
        return;
      }

      selectedPeriods.forEach(period => {
        const ratioSelectId = "ratio" + period.replace("period", "");
        const ratio = document.getElementById(ratioSelectId).value;

        const section = document.createElement("div");
        section.className = "result";
        section.innerHTML = `<h3>${PERIOD_NAMES[period]}</h3>`;

        let allNums = [];

        CONDITIONS[period].forEach((cond, idx) => {
          const nums = generateSet(ratio, cond);
          allNums = allNums.concat(nums);
          section.innerHTML += `<div class="set"><b>${LABELS[idx]}:</b> ${nums.join(", ")}</div>`;
        });

        // ì¤‘ë³µ ìˆ«ì ì§‘ê³„ (2íšŒ ì´ìƒë§Œ)
        const freq = {};
        allNums.forEach(n => { freq[n] = (freq[n] || 0) + 1; });
        const dupNums = Object.entries(freq)
          .filter(([_, count]) => count >= 2)
          .sort((a, b) => b[1] - a[1])
          .map(([num, count]) => `${num}(${count}íšŒ)`);

        if (dupNums.length > 0) {
          section.innerHTML += `<p class="dup">ì¶”ì²œë²ˆí˜¸ ë‚´ ì¤‘ë³µ ìˆ«ì: ${dupNums.join(", ")}</p>`;
        }

        resultsDiv.appendChild(section);
      });
    }

    function generateSet(ratio, cond) {
      const [oddCount, evenCount] = ratio.split(":").map(Number);
      let set = [];

      // ë¬´í•œ ë£¨í”„ ë°©ì§€ìš© ì•ˆì „ì¥ì¹˜: ì¼ì • ì‹œë„ í›„ ì „ëµ ë³€ê²½
      let attempts = 0;

      while (true) {
        attempts++;
        set = [];

        // í™€ìˆ˜ ì±„ìš°ê¸°
        while (set.filter(n => n % 2 === 1).length < oddCount) {
          const num = Math.floor(Math.random() * 45) + 1;
          if (num % 2 === 1) set.push(num);
        }
        // ì§ìˆ˜ ì±„ìš°ê¸°
        while (set.filter(n => n % 2 === 0).length < evenCount) {
          const num = Math.floor(Math.random() * 45) + 1;
          if (num % 2 === 0) set.push(num);
        }

        // ì¤‘ë³µ ì œê±° í›„ 6ê°œ ì±„ìš°ê¸°
        set = [...new Set(set)];
        while (set.length < 6) {
          const num = Math.floor(Math.random() * 45) + 1;
          set.push(num);
          set = [...new Set(set)];
        }

        set.sort((a, b) => a - b);
        const sum = set.reduce((a, b) => a + b, 0);

        if (cond.exact !== undefined) {
          if (sum === cond.exact) return set;
        } else if (sum >= cond.min && sum <= cond.max) {
          return set;
        }

        // ë„ˆë¬´ ì˜¤ë˜ ëª» ì°¾ìœ¼ë©´ í•œ ë²ˆ ì„ê¸° ì „ëµìœ¼ë¡œ ë¶„í¬ ë‹¤ë³€í™”
        if (attempts % 500 === 0) {
          set = Array.from({ length: 6 }, () => Math.floor(Math.random() * 45) + 1)
            .sort((a, b) => a - b);
        }
      }
    }
  </script>
</body>
</html>
